# Deployment README

## Render Deployment Instructions

### Prerequisites
- Render account
- OpenAI API key
- (Optional) YouTube Data API key

### Environment Variables to Set in Render Dashboard

1. **OPENAI_API_KEY** (Required)
   - Get from: https://platform.openai.com/api-keys
   - Used for pattern detection and code analysis

2. **YOUTUBE_API_KEY** (Optional)
   - Get from: https://console.cloud.google.com
   - Used for video recommendations

3. **SECRET_KEY** (Auto-generated)
   - Used for JWT authentication
   - Render auto-generates this

4. **DATABASE_URL** (Auto-configured)
   - PostgreSQL connection string
   - Automatically set by Render database

### Deployment Steps

1. **Push to GitHub:**
   ```bash
   git add .
   git commit -m "Add Pattern Intelligence Layer"
   git push origin main
   ```

2. **Deploy on Render:**
   - Go to Render Dashboard
   - Connect your GitHub repository
   - Set environment variables mentioned above
   - Render will automatically run `python build.py`

3. **Verify Deployment:**
   - Check `/api/health` endpoint
   - Test pattern detection via Chat page

### New Features in This Deployment

- **Pattern Intelligence Layer**: 12 pattern categories for code error detection
- **External Knowledge Search**: GitHub, StackOverflow, Dev.to integration
- **Debugging Insights**: Root cause analysis with structured output
- **Confidence Scoring**: Transparency in pattern detection accuracy
- **Live Video Transcription**: Whisper-based transcription with timestamps
- **Solution Highlighting**: AI-powered identification of solution segments in videos
- **Interactive Video Player**: Clickable transcript with timestamp navigation

### Dependencies Added

- `beautifulsoup4` - Web scraping for external knowledge
- `requests` - HTTP requests for API integrations
- `youtube-transcript-api` - YouTube transcript fetching
- `openai-whisper` - Video transcription
- `yt-dlp` - YouTube video downloading

All dependencies are listed in `backend/requirements.txt` and `requirements.txt` and will be automatically installed during build.

### Important Notes for Render Deployment

1. **Video Storage**: Videos are downloaded to `backend/data/` directory. On Render, this is ephemeral storage that gets cleared on redeploy. Consider using external storage (S3, etc.) for production.

2. **Whisper Model**: The Whisper model is cached in memory after first load. This improves performance but uses significant RAM.

3. **Video Processing**: Large videos may take time to download and transcribe. Consider adding timeout limits or background job processing.

4. **API Keys Required**:
   - `OPENAI_API_KEY` - Required for GPT-4o and solution identification
   - `YOUTUBE_API_KEY` - Optional but recommended for video search
   - `SECRET_KEY` - Auto-generated by Render (or set manually)
