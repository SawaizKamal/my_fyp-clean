# Render Deployment Guide

## üöÄ Quick Deployment Steps

### 1. Connect Repository to Render

1. Go to [Render Dashboard](https://dashboard.render.com)
2. Click "New +" ‚Üí "Blueprint"
3. Connect your GitHub account
4. Select repository: `SawaizKamal/my_fyp-clean`
5. Render will detect `render.yaml` automatically

### 2. Configure Environment Variables

In Render Dashboard ‚Üí Your Service ‚Üí Environment:

**Required:**
- `OPENAI_API_KEY` - Your OpenAI API key (get from https://platform.openai.com/api-keys)
- `SECRET_KEY` - Auto-generated by Render (or generate with: `openssl rand -hex 32`)

**Optional but Recommended:**
- `YOUTUBE_API_KEY` - YouTube Data API v3 key (get from https://console.cloud.google.com)
- `ENVIRONMENT` - Set to `production` for production deployments
- `ALLOWED_ORIGINS` - Comma-separated list of allowed origins (e.g., `https://yourapp.onrender.com`)

### 3. Database Setup

The `render.yaml` automatically creates a PostgreSQL database. The `DATABASE_URL` is automatically configured.

### 4. Deploy

Render will automatically:
1. Run `python build.py` (builds frontend and sets up backend)
2. Start the service with: `cd backend && python -m uvicorn main:app --host 0.0.0.0 --port $PORT`

### 5. Verify Deployment

1. Check health endpoint: `https://yourapp.onrender.com/api/health`
2. Should return: `{"status": "ok", "database": "connected", "model": "gpt-4o"}`

## üìã Important Notes

### Video Storage
- Videos are stored in `backend/data/` directory
- On Render, this is **ephemeral storage** (cleared on redeploy)
- For production, consider using:
  - AWS S3
  - Google Cloud Storage
  - Cloudinary
  - Or other cloud storage solutions

### Resource Limits (Free Tier)
- **512 MB RAM** - Whisper model uses ~150-200MB when loaded
- **0.5 CPU** - Video processing may be slow
- **Ephemeral disk** - Videos are lost on redeploy

### Recommended Upgrades
For production use, consider upgrading to:
- **Starter Plan ($7/month)**: 512MB RAM, better performance
- **Standard Plan ($25/month)**: 2GB RAM, better for video processing

### API Costs
- **OpenAI API**: Charges per request (GPT-4o and Whisper)
- Monitor usage in OpenAI dashboard
- Consider setting usage limits

### Build Time
- First build: ~10-15 minutes (installs dependencies, builds frontend)
- Subsequent builds: ~5-8 minutes

## üîß Troubleshooting

### Build Fails
- Check build logs in Render dashboard
- Ensure all environment variables are set
- Verify `render.yaml` syntax is correct

### Service Won't Start
- Check logs for errors
- Verify `OPENAI_API_KEY` is set correctly
- Check if port is correctly set to `$PORT`

### Video Transcription Fails
- Check if video download is successful
- Verify Whisper model loads correctly
- Check OpenAI API key is valid

### Database Connection Issues
- Verify `DATABASE_URL` is set (auto-configured by Render)
- Check database is running in Render dashboard

## üìù Post-Deployment Checklist

- [ ] Health endpoint returns OK
- [ ] User registration works
- [ ] User login works
- [ ] Video search works (if YOUTUBE_API_KEY is set)
- [ ] Chat assistant works
- [ ] Video transcription works
- [ ] Video player page loads correctly

## üîó Useful Links

- [Render Documentation](https://render.com/docs)
- [OpenAI API Keys](https://platform.openai.com/api-keys)
- [YouTube Data API](https://console.cloud.google.com)
- [Your Repository](https://github.com/SawaizKamal/my_fyp-clean)

